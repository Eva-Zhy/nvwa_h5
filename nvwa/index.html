<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"/>
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes"/>
    <meta name="apple-mobile-web-app-status-bar-style" content="black "/>
    <link rel="stylesheet" type="text/css" href="css/main.css?v=21111119"/>
    <link rel="stylesheet" type="text/css" href="css/animate.min.css?v=123"/>
    <title>女娲补天</title>
    <script src="js/jquery.js"></script>
    <script type="text/javascript" src="js/layout.js"></script>
    <script type="text/javascript" src="js/imagesloaded.pkgd.js"></script>
    <script type="text/javascript" src="js/jquery.transit.js"></script>
    <script src="https://pj.wkfans.com/wxshare/wxShare.js?v=123"></script>
    <script src="weixin/outjs/config.js"></script>
    <script src="weixin/outjs/wxUser.js"></script>
    <script src="weixin/outjs/util.js"></script>
    <script>
        window.openid = ""
//        window.gg.wxUser.getUserInfo(function(res){
//            console.log(res);
//            window.openid = res.openid;
//        });
    </script>
</head>
<body>
<audio src="audio/bg.mp3" id="bg" loop="loop" autoplay="autoplay"></audio>
<div id="loading">
    <div id="lding_btn">
        <div id="showld">
            <img id="page0_1" src="images/page0/loding_00000.png" class="loading-css" style="display: block;">
            <img id="page0_2" src="images/page0/loding_00001.png" class="loading-css" style="display: none;">
            <img id="page0_3" src="images/page0/loding_00002.png" class="loading-css" style="display: none;">
            <img id="page0_4" src="images/page0/loding_00003.png" class="loading-css" style="display: none;">
            <img id="page0_5" src="images/page0/loding_00004.png" class="loading-css" style="display: none;">
            <img id="page0_6" src="images/page0/loding_00005.png" class="loading-css" style="display: none;">
            <img id="page0_7" src="images/page0/loding_00006.png" class="loading-css" style="display: none;">
            <img id="page0_8" src="images/page0/loding_00007.png" class="loading-css" style="display: none;">
            <img id="page0_9" src="images/page0/loding_00008.png" class="loading-css" style="display: none;">
            <img id="page0_10" src="images/page0/loding_00009.png" class="loading-css" style="display: none;">
            <img id="page0_11" src="images/page0/loding_00010.png" class="loading-css" style="display: none;">
            <img id="page0_12" src="images/page0/loding_00011.png" class="loading-css" style="display: none;">
            <img id="page0_13" src="images/page0/loding_00012.png" class="loading-css" style="display: none;">
            <img id="page0_14" src="images/page0/loding_00013.png" class="loading-css" style="display: none;">
            <img id="page0_15" src="images/page0/loding_00014.png" class="loading-css" style="display: none;">
            <img id="page0_16" src="images/page0/loding_00015.png" class="loading-css" style="display: none;">
            <img id="page0_17" src="images/page0/loding_00016.png" class="loading-css" style="display: none;">
            <img id="page0_18" src="images/page0/loding_00017.png" class="loading-css" style="display: none;">
            <img id="page0_19" src="images/page0/loding_00018.png" class="loading-css" style="display: none;">
            <img id="page0_20" src="images/page0/loding_00019.png" class="loading-css" style="display: none;">
            <img id="page0_21" src="images/page0/loding_00020.png" class="loading-css" style="display: none;">
            <img id="page0_22" src="images/page0/loding_00021.png" class="loading-css" style="display: none;">
            <img id="page0_23" src="images/page0/loding_00022.png" class="loading-css" style="display: none;">
            <img id="page0_24" src="images/page0/loding_00023.png" class="loading-css" style="display: none;">
            <img id="page0_25" src="images/page0/loding_00024.png" class="loading-css" style="display: none;">
            <img id="page0_26" src="images/page0/loding_00025.png" class="loading-css" style="display: none;">
            <img id="page0_27" src="images/page0/loding_00026.png" class="loading-css" style="display: none;">
            <img id="page0_28" src="images/page0/loding_00027.png" class="loading-css" style="display: none;">
            <img id="page0_29" src="images/page0/loding_00028.png" class="loading-css" style="display: none;">
            <img id="page0_30" src="images/page0/loding_00029.png" class="loading-css" style="display: none;">
            <img id="page0_31" src="images/page0/loding_00030.png" class="loading-css" style="display: none;">
            <img id="page0_32" src="images/page0/loding_00031.png" class="loading-css" style="display: none;">
            <img id="page0_33" src="images/page0/loding_00032.png" class="loading-css" style="display: none;">
            <img id="page0_34" src="images/page0/loding_00033.png" class="loading-css" style="display: none;">
            <img id="page0_35" src="images/page0/loding_00034.png" class="loading-css" style="display: none;">
            <img id="page0_36" src="images/page0/loding_00035.png" class="loading-css" style="display: none;">
            <img id="page0_37" src="images/page0/loding_00036.png" class="loading-css" style="display: none;">
            <img id="page0_38" src="images/page0/loding_00037.png" class="loading-css" style="display: none;">
            <img id="page0_39" src="images/page0/loding_00038.png" class="loading-css" style="display: none;">
            <img id="page0_40" src="images/page0/loding_00039.png" class="loading-css" style="display: none;">
            <img id="page0_41" src="images/page0/loding_00040.png" class="loading-css" style="display: none;">
            <img id="page0_42" src="images/page0/loding_00041.png" class="loading-css" style="display: none;">
            <img id="page0_43" src="images/page0/loding_00042.png" class="loading-css" style="display: none;">
            <img id="page0_44" src="images/page0/loding_00043.png" class="loading-css" style="display: none;">
            <img id="page0_45" src="images/page0/loding_00044.png" class="loading-css" style="display: none;">
            <img id="page0_46" src="images/page0/loding_00045.png" class="loading-css" style="display: none;">
            <img id="page0_47" src="images/page0/loding_00046.png" class="loading-css" style="display: none;">
            <img id="page0_48" src="images/page0/loding_00047.png" class="loading-css" style="display: none;">
            <img id="page0_49" src="images/page0/loding_00048.png" class="loading-css" style="display: none;">
            <img id="page0_50" src="images/page0/loding_00049.png" class="loading-css" style="display: none;">
            <img id="page0_51" src="images/page0/loding_00050.png" class="loading-css" style="display: none;">
            <img id="page0_52" src="images/page0/loding_00051.png" class="loading-css" style="display: none;">
            <img id="page0_53" src="images/page0/loding_00052.png" class="loading-css" style="display: none;">
            <img id="page0_54" src="images/page0/loding_00053.png" class="loading-css" style="display: none;">
            <img id="page0_55" src="images/page0/loding_00054.png" class="loading-css" style="display: none;">
            <img id="page0_56" src="images/page0/loding_00055.png" class="loading-css" style="display: none;">
            <img id="page0_57" src="images/page0/loding_00056.png" class="loading-css" style="display: none;">
            <img id="page0_58" src="images/page0/loding_00057.png" class="loading-css" style="display: none;">
            <img id="page0_59" src="images/page0/loding_00058.png" class="loading-css" style="display: none;">
            <img id="page0_60" src="images/page0/loding_00059.png" class="loading-css" style="display: none;">
            <img id="page0_61" src="images/page0/loding_00060.png" class="loading-css" style="display: none;">
            <img id="page0_62" src="images/page0/loding_00061.png" class="loading-css" style="display: none;">
            <img id="page0_63" src="images/page0/loding_00062.png" class="loading-css" style="display: none;">
            <img id="page0_64" src="images/page0/loding_00063.png" class="loading-css" style="display: none;">
            <img id="page0_65" src="images/page0/loding_00064.png" class="loading-css" style="display: none;">
            <img id="page0_66" src="images/page0/loding_00065.png" class="loading-css" style="display: none;">
            <img id="page0_67" src="images/page0/loding_00066.png" class="loading-css" style="display: none;">
            <img id="page0_68" src="images/page0/loding_00067.png" class="loading-css" style="display: none;">
            <img id="page0_69" src="images/page0/loding_00068.png" class="loading-css" style="display: none;">
            <img id="page0_70" src="images/page0/loding_00069.png" class="loading-css" style="display: none;">
            <img id="page0_71" src="images/page0/loding_00070.png" class="loading-css" style="display: none;">
            <img id="page0_72" src="images/page0/loding_00071.png" class="loading-css" style="display: none;">
            <img id="page0_73" src="images/page0/loding_00072.png" class="loading-css" style="display: none;">
            <img id="page0_74" src="images/page0/loding_00073.png" class="loading-css" style="display: none;">
            <img id="page0_75" src="images/page0/loding_00074.png" class="loading-css" style="display: none;">
            <img id="page0_76" src="images/page0/loding_00075.png" class="loading-css" style="display: none;">
            <img id="page0_77" src="images/page0/loding_00076.png" class="loading-css" style="display: none;">
            <div id="jdt">
                <div id="jdt-v">
                </div>
            </div>
            <img id="ld_f1" src="img/1.png"/>
            <img id="ld_f2" style="display: none;" src="img/2.png"/>
            <img id="ld_f3" style="display: none;"  src="img/3.png"/>
        </div>
    </div>
    <img id="dianji" src="images/start.png"/>
</div>

<div id="page1" class="page" style="z-index: 1;">
</div>

<div id="page2" class="page" style="z-index: 2;">
</div>

<div id="page3" class="page" style="z-index: 3;">
</div>

<div id="page4" class="page" style="z-index: 4;">
</div>

<div id="page5" class="page" style="z-index: 66;">
</div>

<div id="page6" class="page" style="z-index: 77;">
</div>

<div id="page7" class="page" style="z-index: 88;">
</div>

<div id="page8" class="page" style="z-index: 99;">
</div>

<div id="page9" class="page" style="z-index: 100;">
</div>

<div id="video_end">
    <div id="video_bg">
    </div>
    <div class="red_line">
    </div>
    <img src="" class="text"/>

    <!--</div>-->
    <img id="jx" src="img/icon/page2_btn2.png">
    <img id="ko" src="img/icon/page2_btn1.png">
</div>

<div id="page1_btn">
    <img class="shou" src="img/icon/shou3.png">
    <img class="wu1" src="images/wu2.png">
    <img class="wu2" src="images/wu1.png">
    <img class="tis1" src="images/tis1.png">
</div>

<div id="page2_btn">
    <img class="shou2" src="images/shou2.png">
    <img class="wcs" id="div2" src="images/wcs.png">
    <img class="tis2" src="images/tis2.png">
</div>

<div id="page3_btn">
    <img id="yaos1" class="yaos1" src="images/yaos1.png">
    <img id="ydjd1" class="ydjd1" src="images/ydjd1.png">
</div>

<div id="page3_new">
    <div class="box" id="bb">
        <img class="page" style="display: block;" src="images/page3/fangte1-2_00172.jpg" >
        <canvas id="cas" ></canvas>
    </div>
</div>

<div id="page4_new">
    <img class="shou2" src="img/shouhua.png">
</div>

<div id="page5_new">
    <img class="yaoshi_bg" src="images/yaoshi_bg.png">
    <img class="yaoshi_btn1" src="images/btn1.png">
    <img class="yaoshishi1" src="images/yaishshi.png">
    <img class="jdtitao" src="images/jdtitao.png">
</div>

<div id="page6_new">
    <div class="dati1">
        <img class="dt_bg1" src="images/dt_bg1.png">
        <img class="dt_f1" src="images/dt_f1.png">
        <img class="dt_f2" src="images/dt_f2.png">
        <img class="dt_t1" src="images/dt_t1.png">
        <img class="dt_t2" src="images/dt_t2.png">
        <img class="dt_t3" src="images/dt_t3.png">
    </div>
    <div class="dati1_err">
        <img class="dt_err1" src="images/dt_err1.png">
        <img class="dt_btn1" src="images/dt_btn1.png">
    </div>

    <img id="yaos2" style="display: none;" class="yaos1" src="images/yaos2.png">
    <img id="ydjd2" style="display: none;" class="ydjd1" src="images/ydjd2.png">
</div>

<div id="page4_btn">
    <div class="dati1">
        <img class="dt_bg1" src="images/dt_bg1.png">
        <img class="dt_f1" src="images/dt_f1.png">
        <img class="dt_f2" src="images/dt_f2.png">
        <img class="dt_t1" src="images/dt_t1.png">
        <img class="dt_t2" src="images/dt_t2.png">
        <img class="dt_t3" src="images/dt_t3.png">
    </div>
    <div class="dati1_err">
        <img class="dt_err1" src="images/dt_err1.png">
        <img class="dt_btn1" src="images/dt_btn1.png">
    </div>

    <img id="yaos2" style="display: none;" class="yaos1" src="images/yaos2.png">
    <img id="ydjd2" style="display: none;" class="ydjd1" src="images/ydjd2.png">

</div>

<div id="page6_btn">
    <div class="dati2">
        <img class="dt_bg1" src="images/dt_bg2.png">
        <img class="dt_f1" src="images/dt_f2_1.png">
        <img class="dt_f2" src="images/dt_f2_2.png">
        <img class="dt_t1_2" src="images/dt_t2_1.png">
        <img class="dt_t2_2" src="images/dt_t2_2.png">
        <img class="dt_t3_2" src="images/dt_t2_3.png">
    </div>
    <div class="dati2_err">
        <img class="dt_err2" src="images/dt_err2.png">
        <img class="dt_btn2" src="images/dt_btn2.png">
    </div>

    <img id="yaos3" style="display: none;" class="yaos1" src="images/yaos3.png">
    <img id="ydjd3" style="display: none;" class="ydjd1" src="images/ydjd3.png">
</div>

<div id="page7_btn">
    <img class="bg" src="images/page9/jiewei_00884.jpg">
    <img class="bg2" src="images/zjbg.jpg">
    <div class="qianmian" style="display:block;">
<!--        <img class="hecheng" src="images/gec.png">-->
        <img class="yao1_1" src="images/yaos1.png">
        <img class="yao1_2" src="images/yaos1.png">
        <img class="yao1_3" src="images/yaos1.png">
        <img class="hecheng" src="images/hhhhc.png">

        <div class="gaoliang"></div>
        <img class="hezi" src="images/xiangzi1.png">
        <img class="shou3" src="img/icon/shou3.png">
        <img id="lp1" class="lp" src="images/lp1.png">
        <img id="lp2" style="display: none; opacity: 1" class="lp" src="images/lp4.png">
        <img id="lp3" style="display: none; opacity: 1"  class="lp" src="images/lp2.png">
        <img id="lp4" style="display: none; opacity: 1"  class="lp" src="images/lp5.png">
        <img id="lp5" style="display: none; opacity: 1"  class="lp" src="images/lp3.png">

        <img id="lp6" class="sb" src="images/sb.png">
        <img class="bt1" src="images/bt1.png">
        <div class="huodong">活动规则</div>

        <div id="lp_text" style="width: 18rem;
    color: #000;
    position: absolute;
    z-index: 5;
    top: 15.5rem;
    text-align: center;
    left: 11.3rem;
    display: none;
    opacity: 0;
    line-height: 1.1rem;
    font-size: 1.1rem;">
            <p>恭喜您获得长沙方特东方神画</p>
            <p>半价门票一张</p>
            <p>兑换码有效时间：当日有效</p>
            <p>购买时间：当日有效</p>
            <p>入园时间:</p>
            <p>2019年x月xx日—2019年x月xx日</p>
            <p style="font-size: 1.5rem;font-weight: 600;">兑换码：<span id="code"></span></p>
            <p>长按兑换码复制</p>
        </div>
    </div>
    <div class="huodong_v" style="display:none;">
        <img class="huodong_img" src="images/gz.png">
        <img class="bt2" src="images/bt2.png">
    </div>
    <div class="gzh_bg">
        <img class="ewm" src="images/ewn.jpg">
        <img class="ewmbt2" src="images/bt2.png">
    </div>
    <div class="sure-v">
        <img class="sure-ewm" src="images/sure.png">
        <img class="sureewmbt2" src="images/dt_btn2.png">
    </div>
    <div class="app_v" style="display:none;">
        <img class="app_img" src="images/UIjz.png">
        <img class="appbt2" src="images/gzh.png">
        <img class="appbt3" src="images/app.png">
    </div>
    <div class="czeg-v">
        <img class="sure-ewm" src="images/czeg.png">
        <img class="czegbt2" src="images/dt_btn2.png">
        <div class="huodong2">活动规则</div>
        <!--<img class="sureewmbt2" src="images/dt_btn2.png">-->
    </div>
</div>

<div id="end_page">
    <!--<img id="end_bg" src="img/end_page/bg.jpg">-->
    <div id="yizhao" style="display: none;">
    </div>
    <div id="baoming" style="display: none;">
    </div>

    <div id="fenxiang" style="display: none;">
    </div>
</div>

<script>
    var clientWidth = document.documentElement.clientWidth;
    var clientHeight = document.documentElement.clientHeight;
    var w_h = 0.5;

    var useHeight = clientWidth * 2;
    if (useHeight > clientHeight) {
        $(".page").css("height", useHeight + "px");
        $(".page").css("top", -(useHeight - clientHeight) / 2 + "px");
    }

    var play_num = 0;
    var imgs = 0;
    var my_now_page = 1;
    var bg = document.getElementById("bg");

    $(document).ready(function () {
         audioAutoPlay();
    });

    function audioAutoPlay() {
        document.addEventListener("WeixinJSBridgeReady", function () {
            bg.play();
        });
        document.addEventListener('YixinJSBridgeReady', function () {
            bg.play();
        });
    }

    add_page_img(1, "piantou_00", 0, 153, ".jpg");
    add_page_img(2, "fangte1_00", 0, 153, ".jpg");
    add_page_img(3, "fangte1-2_00", 153, 172, ".jpg");
    add_page_img(4, "fangte1-2_00", 173, 267, ".jpg");
    add_page_img(5, "fangte1-2_00", 268, 295, ".jpg");
    add_page_img(6, "fangte1-2_00", 296, 326, ".jpg");
    add_page_img(7, "zhuchai+mengjiangnv_00", 0, 95, ".jpg");
    add_page_img(8, "leidi+xinzhuibeiying_00", 691, 755, ".jpg");
    add_page_img(9, "jiewei_00", 771, 884, ".jpg");

    //    page_ani(0, 11, "", 500, "");
    var li = 0;
    var page_interval = setInterval(function () {
        var page_id = '#page' + 0 + '_';
        var jq_page_id = '#page' + 0;
        if (li < 78) {
            $(page_id + li).css('display', 'none');
        }
        li++;
        $(page_id + li).css('display', 'block');

        if (li == 78) {
            $(page_id + 1).css('display', 'block');
            li = 0;
        }
    }, 50);

    $('.img-css').imagesLoaded().always(function () {
        $("#jdt-v").css("width", "100%");
        setTimeout(function () {
            $("#showld").animate({opacity: 0}, 600, function () {
                $("#showld").css('display', 'none');
                clearInterval(page_interval);
                $("#dianji").css('display', 'block');
                $("#dianji").animate({opacity: 1}, 600, function () {
                    $('#dianji').click(function () {
                        $('#loading').animate({opacity: 0}, 600, function () {
                            $("#page1").css('display', 'block');
                            $('#loading').css('display', 'none');
                            page_ani(1, 152, "", "", "");
                        });
                    });
                })
            });
        }, 300);
    }).progress(function (instance, image) {
        imgs++;
        var bfb = GetPercent(imgs, 670);
        if (bfb=="30%") {
            $("#ld_f1").css("display","none");
            $("#ld_f2").css("display","block");
        }else if (bfb=="60%") {
            $("#ld_f2").css("display","none");
            $("#ld_f3").css("display","block");
        }
        // $("#bfb").text(bfb);
        $("#jdt-v").css("width", bfb);
    });

    function GetPercent(num, total) {
        num = parseFloat(num);
        total = parseFloat(total);
        if (isNaN(num) || isNaN(total)) {
            return "-";
        }
        return total <= 0 ? "0%" : (Math.round(num / total * 10000) / 100.00 + "%");
    }

    function add_page_img(page_num, img_head, img_start, img_end, img_suffix) {
        var add_html = '';
        var page_id = 'page' + page_num;
        var i = 1;
        for (img_start; img_start <= img_end; img_start++) {
            var img_id = page_id + '_' + i;
            var img_src = 'images/page' + page_num + '/' + img_head;
            if (img_start < 10) {
                img_src = img_src + '00' + img_start + img_suffix;
            } else if (img_start > 9 && img_start < 100) {
                img_src = img_src + '0' + img_start + img_suffix;
            } else if (img_start > 99 && img_start < 1000) {
                img_src = img_src + '' + img_start + img_suffix;
            }

            add_html += "<img id='" + img_id + "' src='" + img_src + "' class='img-css'>";
            i++;
        }
        var jq_page_id = "#" + page_id;
        $(jq_page_id).append(add_html);
    }

    function page_ani(now_page, img_num, page_title, page_time, sleep_time) {
        var page_id = '';
        page_id = '#page' + now_page + '_';
        var jq_page_id = '#page' + now_page;
        my_now_page = now_page;
        if (now_page == 2) {
            $("#page2").css('display', 'block');
        } else if (now_page == 3) {
            $("#page3").css('display', 'block');
        } else if (now_page == 4) {
            $("#page4").css('display', 'block');
        } else if (now_page == 5) {
            $("#page5").css('display', 'block');
        } else if (now_page == 6) {
            $("#page6").css('display', 'block');
        } else if (now_page == 7) {
            $("#page7").css('display', 'block');
        }else if (now_page == 8) {
            $("#page8").css('display', 'block');
        }else if (now_page == 9) {
            $("#page9").css('display', 'block');
        }

        if (page_time == "") {
             page_time = 15;
//            page_time = 95;
        }
        var i = 0;
        var page_interval = setInterval(function () {
            if (i == 0) {
//                $("title").html(page_title);.
                $(jq_page_id).css('display', 'block');
            }
            if (i != img_num) {
                $(page_id + i).css('display', 'none');
            }
            i++;
            $(page_id + i).css('display', 'block');
            if (i > img_num) {
                clearInterval(page_interval);
                console.log("now_page",now_page);
                if (now_page == 1) {
                    show_page1_btn();
                } else if (now_page == 2) {
//                    show_page2_btn();
                    show_page2_new();
                } else if (now_page == 3) {
                    show_page3_new();
//                    show_page3_btn();
                } else if (now_page == 4) {
                    show_page4_new();
                } else if (now_page == 5) {
                    show_page5_new();
                } else if (now_page == 6) {
                    show_page6_new();
                } else if (now_page == 7) {
                    show_page7_btn();
                } else if (now_page == 8) {
                    show_page8_btn();
                } else if (now_page == 9) {
                    show_page9_btn();
                }
            }
        }, page_time);
    }


    var shouzhi;

    function show_page1_btn() {
        page_ani(2, 153, "", "", "");
    }

    function show_page2_new() {
        page_ani(3, 20, "", "", "");
    }

    function show_page6_new(){

    }
//    show_page5_new();
    function show_page5_new() {
        $("#page5_new").css("display","block");
        $("#page5_new").animate({opacity: 1}, 100,function(){
            $(".yaoshi_btn1").click(function(){
//                $('.yaoshishi1').animate({top:"0rem",left:"-5rem"},1000,function(){
//                });

                $(".yaoshishi1").transition({
                    top:"0rem",left:"-5rem",
                    opacity: 0.1, scale: 0.3,
                    duration: 500,
                    easing: 'linear',
                    complete: function(){
                        console.log("1111");
                        $(".yaoshi_bg").animate({opacity:0});
                        $(".yaoshi_btn1").animate({opacity:0});

                        $("#page5_new").css('display','none');

                        page_ani(6, 31, "", "", "");
                    }
                });
                $(".jdtitao").attr("src","images/jdtitao1.png")
            });
        });
//        page_ani(3, 20, "", "", "");
    }

    function show_page4_new() {
        $("#page4_new").css("display", "block");
        $("#page4_new").animate({opacity: 1}, 100,function(){

            var touch_left = false;
            var touch_right = false;
            var go_on = false;

            $("#page4_new").on("touchstart", function (e) {
                // 判断默认行为是否可以被禁用
                if (e.cancelable) {
                    // 判断默认行为是否已经被禁用
                    if (!e.defaultPrevented) {
                        e.preventDefault();
                    }
                }
                startX = e.originalEvent.changedTouches[0].pageX;
                startY = e.originalEvent.changedTouches[0].pageY;
            });
            $("#page4_new").on("touchend", function (e) {
                // 判断默认行为是否可以被禁用
                if (e.cancelable) {
                    // 判断默认行为是否已经被禁用
                    if (!e.defaultPrevented) {
                        e.preventDefault();
                    }
                }
                moveEndX = e.originalEvent.changedTouches[0].pageX,
                        moveEndY = e.originalEvent.changedTouches[0].pageY,
                        X = moveEndX - startX,
                        Y = moveEndY - startY;
                //左滑
                if (X > 0) {

                }
                //右滑
                else if (X < 0) {

                }
                //下滑
                else if (Y > 0) {
                }
                //上滑
                else if (Y < 0) {
                    console.log("33");
                    if (!touch_left) {
                        touch_left = true;
                        $(".shou2").animate({opacity: 0}, 750, function () {
                            if (touch_left && !go_on) {
                                go_on = true;
                                setTimeout(function () {
                                    page_ani(5, 28, "", "", "");
                                }, 500)
                            }
                        });
                    }
                }
                //单击
                else {
                }
            });
        });
    }
    var once_tounch = false;
    function show_page3_new() {
        $("#page3_new").css("display", "block");
        $("#page3_new").animate({opacity: 1}, 100,function(){
            var canvas = document.getElementById("cas"), ctx = canvas.getContext("2d");
            var x1, y1, a = 30, timeout, totimes = 100, distance = 30;
            var saveDot = [];
            var canvasBox = document.getElementById("bb");
            canvas.width = canvasBox.clientWidth;
            canvas.height = canvasBox.clientHeight;
            var img = new Image();
            img.src = "images/gujing.png";
            img.onload = function () {
                var w = canvas.height*img.width/img.height;
                ctx.drawImage(img, (canvas.width-w)/2, 0, w, canvas.height);
                tapClip()
            };
            function getClipArea(e, hastouch){
                var x = hastouch ? e.targetTouches[0].pageX : e.clientX;
                var y = hastouch ? e.targetTouches[0].pageY : e.clientY;
                var ndom = canvas;
                while(ndom.tagName!=="BODY"){
                    x -= ndom.offsetLeft;
                    y -= ndom.offsetTop;
                    ndom = ndom.parentNode;
                }
                return {
                    x: x,
                    y: y
                }
            }
            //通过修改globalCompositeOperation来达到擦除的效果
            function tapClip() {
                var hastouch = "ontouchstart" in window ? true : false,
                        tapstart = hastouch ? "touchstart" : "mousedown",
                        tapmove = hastouch ? "touchmove" : "mousemove",
                        tapend = hastouch ? "touchend" : "mouseup";
                var area;
                var x2,y2;
                ctx.lineCap = "round";
                ctx.lineJoin = "round";
                ctx.lineWidth = a * 2;
                ctx.globalCompositeOperation = "destination-out";
                window.addEventListener(tapstart, function (e) {
                    clearTimeout(timeout);
                    e.preventDefault();
                    area = getClipArea(e, hastouch);
                    x1 = area.x;
                    y1 = area.y;
                    drawLine(x1, y1);
                    this.addEventListener(tapmove, tapmoveHandler);
                    this.addEventListener(tapend, function () {
                        this.removeEventListener(tapmove, tapmoveHandler);
                        //检测擦除状态
                        timeout = setTimeout(function () {
                            var imgData = ctx.getImageData(0, 0, canvas.width, canvas.height);
                            var dd = 0;
                            for (var x = 0; x < imgData.width; x += distance) {
                                for (var y = 0; y < imgData.height; y += distance) {
                                    var i = (y * imgData.width + x) * 4;
                                    if (imgData.data[i + 3] > 0) { dd++ }
                                }
                            }
                            if (dd / (imgData.width * imgData.height / (distance * distance)) < 0.9) {
                                if (!once_tounch) {
                                    once_tounch = true;
                                    canvas.className = "noOp";
                                    $("#page3_new").css("display", "none");
                                    page_ani(4, 95, "", "", "");
                                }
                            }
                        }, totimes)
                    });
                    function tapmoveHandler(e) {
                        clearTimeout(timeout);
                        e.preventDefault();
                        area = getClipArea(e, hastouch);
                        x2 = area.x;
                        y2 = area.y;
                        drawLine(x1, y1, x2, y2);
                        x1 = x2;
                        y1 = y2;
                    }
                })
            }
            function drawLine(x1, y1, x2, y2){
                ctx.save();
                ctx.beginPath();
                if(arguments.length==2){
                    ctx.arc(x1, y1, a, 0, 2 * Math.PI);
                    ctx.fill();
                }else {
                    ctx.moveTo(x1, y1);
                    ctx.lineTo(x2, y2);
                    ctx.stroke();
                }
                ctx.restore();
            }
            //使用clip来达到擦除效果
            function otherClip() {
                var hastouch = "ontouchstart" in window ? true : false,
                        tapstart = hastouch ? "touchstart" : "mousedown",
                        tapmove = hastouch ? "touchmove" : "mousemove",
                        tapend = hastouch ? "touchend" : "mouseup";
                var area;
                canvas.addEventListener(tapstart, function (e) {
                    clearTimeout(timeout);
                    e.preventDefault();
                    area = getClipArea(e, hastouch);
                    x1 = area.x;
                    y1 = area.y;
                    ctx.save();
                    ctx.beginPath();
                    ctx.arc(x1, y1, a, 0, 2 * Math.PI);
                    ctx.clip();
                    ctx.clearRect(0, 0, canvas.width, canvas.height);
                    ctx.restore();
                    canvas.addEventListener(tapmove, tapmoveHandler);
                    canvas.addEventListener(tapend, function () {
                        canvas.removeEventListener(tapmove, tapmoveHandler);
                        timeout = setTimeout(function () {
                            var imgData = ctx.getImageData(0, 0, canvas.width, canvas.height);
                            var dd = 0;
                            for (var x = 0; x < imgData.width; x += distance) {
                                for (var y = 0; y < imgData.height; y += distance) {
                                    var i = (y * imgData.width + x) * 4;
                                    if (imgData.data[i + 3] > 0) {
                                        dd++
                                    }
                                }
                            }
                            if (dd / (imgData.width * imgData.height / (distance * distance)) < 0.9) {
                                if (!once_tounch) {
                                    once_tounch = true;
                                    canvas.className = "noOp";
                                    $("#page3_new").css("display", "none");
                                    page_ani(4, 95, "", "", "");
                                }
                            }
                        }, totimes)
                    });
                    function tapmoveHandler(e) {
                        e.preventDefault();
                        area = getClipArea(e, hastouch);
                        x2 = area.x;
                        y2 = area.y;
                        var asin = a * Math.sin(Math.atan((y2 - y1) / (x2 - x1)));
                        var acos = a * Math.cos(Math.atan((y2 - y1) / (x2 - x1)));
                        var x3 = x1 + asin;
                        var y3 = y1 - acos;
                        var x4 = x1 - asin;
                        var y4 = y1 + acos;
                        var x5 = x2 + asin;
                        var y5 = y2 - acos;
                        var x6 = x2 - asin;
                        var y6 = y2 + acos;
                        ctx.save();
                        ctx.beginPath();
                        ctx.arc(x2, y2, a, 0, 2 * Math.PI);
                        ctx.clip();
                        ctx.clearRect(0, 0, canvas.width, canvas.height);
                        ctx.restore();
                        ctx.save();
                        ctx.beginPath();
                        ctx.moveTo(x3, y3);
                        ctx.lineTo(x5, y5);
                        ctx.lineTo(x6, y6);
                        ctx.lineTo(x4, y4);
                        ctx.closePath();
                        ctx.clip();
                        ctx.clearRect(0, 0, canvas.width, canvas.height);
                        ctx.restore();
                        x1 = x2;
                        y1 = y2;
                    }
                })
            }
        });
    }

    function show_page333_() {
        $("#page1_btn").css("display", "block");
        $("#page1_btn").animate({opacity: 1}, 1000);
        // $("#page1_btn").click(function () {
        //     $("#page1_btn").css("display", "none");
        //     page_ani(2, 62, "", "", "");
        //     //
        // });
        var touch_left = false;
        var touch_right = false;
        var go_on = false;

        $("#page1_btn").on("touchstart", function (e) {
            // 判断默认行为是否可以被禁用
            if (e.cancelable) {
                // 判断默认行为是否已经被禁用
                if (!e.defaultPrevented) {
                    e.preventDefault();
                }
            }
            startX = e.originalEvent.changedTouches[0].pageX;
            startY = e.originalEvent.changedTouches[0].pageY;
        });
        $("#page1_btn").on("touchend", function (e) {
            // 判断默认行为是否可以被禁用
            if (e.cancelable) {
                // 判断默认行为是否已经被禁用
                if (!e.defaultPrevented) {
                    e.preventDefault();
                }
            }
            moveEndX = e.originalEvent.changedTouches[0].pageX,
                    moveEndY = e.originalEvent.changedTouches[0].pageY,
                    X = moveEndX - startX,
                    Y = moveEndY - startY;
            //左滑
            if (X > 0) {
                console.log("22");
                if (!touch_right) {
                    touch_right = true;
                    $(".wu2").animate({opacity: 0}, 750, function () {
                        if (touch_right && touch_left && !go_on) {
                            go_on = true;
                            $(".shou").animate({opacity: 0}, 500);
                            $(".tis1").animate({opacity: 0}, 500);
                            setTimeout(function () {
                                page_ani(2, 69, "", "", "");
                            }, 500)
                        }
                    });
                }
            }
            //右滑
            else if (X < 0) {
                console.log("33");
                if (!touch_left) {
                    touch_left = true;
                    $(".wu1").animate({opacity: 0}, 750, function () {
                        if (touch_right && touch_left && !go_on) {
                            go_on = true;
                            $(".shou").animate({opacity: 0}, 500);
                            $(".tis1").animate({opacity: 0}, 500);
                            setTimeout(function () {
                                page_ani(2, 69, "", "", "");
                            }, 500)
                        }
                    });
                }
            }
            //下滑
            else if (Y > 0) {
            }
            //上滑
            else if (Y < 0) {
            }
            //单击
            else {
            }
        });
    }

    function show_page2_btn() {
        $("#page2_btn").css("display", "block");
        $("#page2_btn").animate({opacity: 1}, 1000);
//        $(".shou2").css("top", clientHeight - 55 + "px");
//        $(".shou2").css("left", "90px");
        $(".wcs").css("top", clientHeight - 120 + "px");
        $(".wcs").css("left", '20px');
        var click_once = false;
        var flag = false;
        var cur = {
            x: 0,
            y: 0
        }
        var nx, ny, dx, dy, x, y;

        function down() {
            $(".shou2").animate({opacity: 0}, 700);
            $(".tis2").animate({opacity: 0}, 700);

            flag = true;
            var touch;
            if (event.touches) {
                touch = event.touches[0];
            } else {
                touch = event;
            }
            cur.x = touch.clientX;
            cur.y = touch.clientY;
            dx = div2.offsetLeft;
            dy = div2.offsetTop;
        }

        function move() {
            if (flag) {
                var touch;
                if (event.touches) {
                    touch = event.touches[0];
                } else {
                    touch = event;
                }
                nx = touch.clientX - cur.x;
                ny = touch.clientY - cur.y;
                x = dx + nx;
                y = dy + ny;
                if (y > 0 && x > 0 && x < document.body.clientWidth - $("#div2").width() && y < document.body.clientHeight - $("#div2").height()) {
                    div2.style.left = x + "px";
                    div2.style.top = y + "px";
                }

                //阻止页面的滑动默认事件
                document.addEventListener("touchmove", function () {
                    event.preventDefault();
                }, false);
            }
        }

        //鼠标释放时候的函数
        function end() {
            flag = false;
        }

        var div2 = document.getElementById("div2");
        div2.addEventListener("touchstart", function (e) {
            event.preventDefault();
            down();
        }, false)
        div2.addEventListener("touchmove", function () {
            event.preventDefault();
            move();
            // $('#div2').removeClass('drag');
            // $('#div2').addClass('drag_on');
        }, false)
        div2.addEventListener("touchend", function () {
            event.preventDefault();
            event.stopImmediatePropagation();
            var window_width = document.body.clientWidth;
            var window_height = document.body.clientHeight;
            console.log(window_height)
            end();
            console.log(x);
            if (x == 0 || x == undefined) {
                window.location.href = go_link;
            } else {
                if (y < 0) {
                    y = 0
                }
                if (y > window_height - $("#div2").height()) {
                    y = window_height - $("#div2").height() - 2
                }
                if (x > window_width / 2 - 50) {
                    var right_val = window_width - $("#div2").width() - 2 + 'px';
                    $('#div2').animate({top: '20px', left: clientWidth - 130 + "px"}, 500, function () {
                        $(".wcs").animate({opacity: 0}, 500, function () {
                            page_ani(3, 60, "", "", "");
                        });
                    })
                } else {
                    $('#div2').animate({top: '20px', left: clientWidth - 130 + "px"}, 500, function () {
                        $(".wcs").animate({opacity: 0}, 500, function () {
                            page_ani(3, 60, "", "", "");
                        });
                    })
                }
            }
            x = 0;
        }, false);
    }

    function show_page3_btn() {
        $("#page3_btn").css("display", "block");
        $("#yaos1").animate({opacity: 1}, 1000, function () {
            setTimeout(function () {
                $("#yaos1").animate({opacity: 0}, 1000, function () {
                    setTimeout(function () {
                        page_ani(4, 39, "", "", "");
                    }, 100)
                });
                $("#ydjd1").animate({opacity: 0}, 1000, function () {

                });
            }, 1000)
        });
        $("#ydjd1").animate({opacity: 1}, 1000, function () {
        });
    }

    function show_page4_btn() {
        page_ani(5, 88, "", "", "");
    }

    function show_page5_btn() {
        $("#page4_btn").css("display", "block");
        $("#page4").css("filter", "blur(5px)");
        $('.dt_t1').click(function () {
            $('.dati1').css("display", "none");
            $('.dati1_err').css("display", "block");
        });
        $('.dt_t2').click(function () {
            $('.dati1').css("display", "none");
            $('.dati1_err').css("display", "none");
            $('#yaos2').css("display", "block");
            $('#ydjd2').css("display", "block");
            $("#yaos2").animate({opacity: 1}, 1000, function () {
                setTimeout(function () {
                    $("#yaos2").animate({opacity: 0}, 1000, function () {
                        $("#page4").css("filter", "");
                        setTimeout(function () {
                            page_ani(6, 19, "", "", "");
                        }, 100)
                    });
                    $("#ydjd2").animate({opacity: 0}, 1000, function () {
                    });
                }, 1000)
            });
            $("#ydjd2").animate({opacity: 1}, 1000, function () {

            });


        });

        $('.dt_btn1').click(function () {
            $('.dati1').css("display", "block");
            $('.dati1_err').css("display", "none");
        });

        $('.dt_t3').click(function () {
            $('.dati1').css("display", "none");
            $('.dati1_err').css("display", "block");
        });
    }

    function show_page7_btn() {
        console.log(111);
        page_ani(8, 64, "", "", "");
    }

    function show_page8_btn() {
        console.log(222);
        $("#page6_btn").css("display", "block");
        $("#page6").css("filter", "blur(5px)");
        $('.dt_t1_2').click(function () {
            $('.dati2').css("display", "none");
            $('.dati2_err').css("display", "block");
        });
        $('.dt_t2_2').click(function () {
            $('.dati2').css("display", "none");
            $('.dati2_err').css("display", "block");
        });

        $('.dt_btn2').click(function () {
            $('.dati2').css("display", "block");
            $('.dati2_err').css("display", "none");
        });

        $('.dt_t3_2').click(function () {
            $('.dati2').css("display", "none");
            $('.dati2_err').css("display", "none");
            $('#yaos3').css("display", "block");
            $('#ydjd3').css("display", "block");
            $("#yaos3").animate({opacity: 1}, 1000, function () {
                setTimeout(function () {
                    $("#yaos3").animate({opacity: 0}, 1000, function () {
                        setTimeout(function () {
                            $("#page6").css("filter", "");
                            page_ani(9, 113, "", "", "");
                        }, 100)
                    });
                    $("#ydjd3").animate({opacity: 0}, 1000, function () {
                    });
                }, 1000)
            });
            $("#ydjd3").animate({opacity: 1}, 1000, function () {
            });
        });
    }

    function show_page9_btn() {
        $("#page7_btn").css("display", "block");
        $(".hecheng").css("display", "block");
        $(".yao1_1").css("display", "block");
        $(".yao1_2").css("display", "block");
        $(".yao1_3").css("display", "block");
        $(".hecheng").animate({opacity: 1}, 1000, function () {
        });
        $(".yao1_1").animate({opacity: 1}, 1000, function () {
        });
        $(".yao1_2").animate({opacity: 1}, 1000, function () {
        });
        $(".yao1_3").animate({opacity: 1}, 1000, function () {
        });
        $(".hecheng").click(function () {
            $(".gaoliang").css("display", "block");
            $(".gaoliang").animate({opacity: 1}, 700, function () {
                $(".hezi").css("display", "block");
                $(".shou3").css("display", "block");
                $(".hecheng").css("display", "none");
                $(".yao1_1").css("display", "none");
                $(".yao1_2").css("display", "none");
                $(".yao1_3").css("display", "none");
                setTimeout(function () {
                    $(".gaoliang").animate({opacity: 0}, 700, function () {
                        $(".gaoliang").css("display", "none");
                        $(".hezi").click(function () {
                            click_f();
                        });
                        $(".shou3").click(function () {
                            click_f();
                        });

                        function click_f() {
                            $.ajax({
                                type:'get',
                                url: "https://www.jwnice.com/jyserver/h5server/public/index.php/nvwa/getCode",
                                data:{
                                    openid:window.openid
                                },
                                dataType:'json',
                                success:function(res){
                                    if (res.errorCode == 200) {
                                        var code = res.data.code;
                                        $("#code").html(code);
                                        $(".shou3").css("display", "none");
                                        $(".hezi").attr("src", "images/xiangzi.png");
                                        $("#lp1").css("display", "block");
                                        $("#lp1").css("display", "block");
                                        setTimeout(function () {
                                            $("#lp1").animate({opacity: 1}, 1000, function () {
                                                setTimeout(function () {
                                                    $("#lp1").css("display","none");
                                                    $("#lp3").css("display","block");
                                                    setTimeout(function () {
                                                        $("#lp3").css("display","none");
                                                        $("#lp2").css("display","block");
                                                        setTimeout(function () {
                                                            $("#lp2").css("display","none");
                                                            $("#lp5").css("display","block");
                                                        },150)
                                                        setTimeout(function () {
                                                            // $("#lp4").css("display","none");
                                                            // $("#lp5").css("display","block");
                                                            setTimeout(function () {

                                                                $(".huodong").css("display", "block");
                                                                $(".bt1").css("display", "block");
                                                                $("#lp_text").css("display", "block");

                                                                $("#lp_text").animate({opacity: 1}, 800, function () {
                                                                });
                                                                $(".huodong").animate({opacity: 1}, 800, function () {
                                                                });
                                                                $(".bt1").animate({opacity: 1}, 800, function () {
                                                                });
                                                                $(".huodong").click(function () {
                                                                    $(".qianmian").css("display", "none");
                                                                    $(".huodong_v").css("display", "block");
                                                                })
                                                                $(".bt2").click(function () {
                                                                    $(".qianmian").css("display", "block");
                                                                    $(".huodong_v").css("display", "none");
                                                                })

                                                                $(".bt1").click(function () {

                                                                    $(".sure-v").css("display", "block");

                                                                    $(".huodong_v").css("display", "none");
                                                                    $(".qianmian").css("display", "none");

                                                                    $(".sureewmbt2").click(function (){
                                                                        $(".bg").css("display", "none");
                                                                        $(".bg2").css("display", "block");
                                                                        $(".sure-v").css("display", "none");
                                                                        $(".app_v").css("display", "block");
                                                                    });


                                                                    $(".appbt2").click(function () {
                                                                        $(".gzh_bg").css("display", "block");
                                                                    })
                                                                    $(".appbt3").click(function () {
                                                                        window.location.href = "https://v.qq.com/x/page/v0886qrt7dp.html";
                                                                    })
                                                                    $(".ewmbt2").click(function () {
                                                                        $(".gzh_bg").css("display", "none");
                                                                    })
                                                                })
                                                            }, 150)
                                                        },150)
                                                    },150)
                                                }, 150)
                                            });
                                        },300);
                                    } else {
                                        $(".czeg-v").css("display","block");
                                        $(".qianmian").css("display", "none");
                                        $(".czegbt2").click(function () {
                                            $(".czeg-v").css("display", "none");
                                            $(".bg").css("display", "none");
                                            $(".bg2").css("display", "block");
                                            $(".sure-v").css("display", "none");
                                            $(".app_v").css("display", "block");

                                            $(".appbt2").click(function () {
                                                $(".gzh_bg").css("display", "block");
                                            });
                                            $(".appbt3").click(function () {
                                                window.location.href = "https://v.qq.com/x/page/v0886qrt7dp.html";
                                            });
                                            $(".ewmbt2").click(function () {
                                                $(".gzh_bg").css("display", "none");
                                            });
                                        })
                                        $(".huodong2").click(function () {
                                            $(".qianmian").css("display", "none");
                                            $(".czeg-v").css("display", "none");
                                            $(".huodong_v").css("display", "block");

                                            $(".bt2").click(function () {
                                                $(".czeg-v").css("display", "block");
                                                $(".huodong_v").css("display", "none");
                                            })
                                        })
                                    }
                                }
                            });
                        }
                    });
                }, 200);
            });
        })
    }

    function show_page6_btn() {
        page_ani(7, 95, "", "", "");

    }

    function checkMobile(str) {
        var re = /^1\d{10}$/;
        if (re.test(str)) {
            return true;
        } else {
            return false;
        }
    }


    var winHeight = "";

    function resize() {
        document.getElementsByTagName('body')[0].style.height = winHeight;
        $("#end_page").css("height", winHeight);
        $("#fenxiang").css("height", winHeight);
        $(window).scrollTop(0);
        $('body').scrollTop(0);
        $('html').scrollTop(0);
        $("#end_page").scrollTop(0);
    }
</script>
<script>

    $(function () {
        //微信内置浏览器浏览H5页面弹出的键盘遮盖文本框的解决办法
        window.addEventListener("resize", function () {
            if (document.activeElement.tagName == "INPUT" || document.activeElement.tagName == "TEXTAREA") {
                window.setTimeout(function () {
                    document.activeElement.scrollIntoViewIfNeeded();
                }, 0);
            }
        })
    });

    window.shareManage.init({
        title: "长沙方特东方神话",
        desc: "和我一起穿越古今，寻找五彩石，赢取长沙方特东方神画半价门票",
        imgUrl: 'https://cdn.pj.wkfans.com/nvwa/img/share.jpg',
        link: window.location.href
    });
</script>

<script charset="utf-8">

</script>
</body>
</html>